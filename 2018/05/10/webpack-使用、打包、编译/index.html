<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>webpack-使用、打包、编译 | Shirmy</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">webpack-使用、打包、编译</h1><a id="logo" href="/.">Shirmy</a><p class="description">From small beginnings comes great things.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">webpack-使用、打包、编译</h1><div class="post-meta">May 10, 2018<span> | </span><span class="category"><a href="/categories/Webpack/">Webpack</a></span></div><a class="disqus-comment-count" data-disqus-identifier="2018/05/10/webpack-使用、打包、编译/" href="/2018/05/10/webpack-使用、打包、编译/#disqus_thread"></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-webpack"><span class="toc-number">1.</span> <span class="toc-text">使用 webpack</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack命令"><span class="toc-number">1.1.</span> <span class="toc-text">Webpack命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Webpack-Cli"><span class="toc-number">1.1.1.</span> <span class="toc-text">Webpack-Cli</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack配置"><span class="toc-number">1.2.</span> <span class="toc-text">Webpack配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第三方脚手架"><span class="toc-number">1.3.</span> <span class="toc-text">第三方脚手架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#打包JS"><span class="toc-number">2.</span> <span class="toc-text">打包JS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#entry-和-output"><span class="toc-number">2.1.</span> <span class="toc-text">entry 和 output</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编译ES6"><span class="toc-number">3.</span> <span class="toc-text">编译ES6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel"><span class="toc-number">3.1.</span> <span class="toc-text">Babel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例-3-3"><span class="toc-number">3.2.</span> <span class="toc-text">例 3-3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Babel-Presets"><span class="toc-number">3.2.1.</span> <span class="toc-text">Babel Presets</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Babel-Polyfill-和-Babel-Runtime-Transform"><span class="toc-number">3.2.2.</span> <span class="toc-text">Babel Polyfill 和 Babel Runtime Transform</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Babel-Polyfill"><span class="toc-number">3.2.3.</span> <span class="toc-text">Babel Polyfill</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Babel-Runtime-Transform"><span class="toc-number">3.2.4.</span> <span class="toc-text">Babel Runtime Transform</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#实际开发的选择"><span class="toc-number">3.2.5.</span> <span class="toc-text">实际开发的选择</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编译-typescript"><span class="toc-number">4.</span> <span class="toc-text">编译 typescript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#typescript-loader"><span class="toc-number">4.1.</span> <span class="toc-text">typescript-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#安装"><span class="toc-number">4.1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置"><span class="toc-number">4.1.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#声明文件"><span class="toc-number">4.2.</span> <span class="toc-text">声明文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#types"><span class="toc-number">4.2.1.</span> <span class="toc-text">@types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#typings"><span class="toc-number">4.2.2.</span> <span class="toc-text">@typings</span></a></li></ol></li></ol></li></ol></div></div><div class="post-content"><p><br></p>
<p>系统学习webpack，基于 webpack@3.10.0。</p>
<p>使用webpack、打包JS、编译ES6、编译 typescript</p>
<a id="more"></a>
<h2 id="使用-webpack"><a href="#使用-webpack" class="headerlink" title="使用 webpack"></a>使用 webpack</h2><h3 id="Webpack命令"><a href="#Webpack命令" class="headerlink" title="Webpack命令"></a>Webpack命令</h3><ul>
<li>webpack -h (获取帮助信息)</li>
<li>webpack -v (获取版本信息)<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack &lt;entry&gt;<span class="meta">[&lt;entry&gt;]</span>&lt;output&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Webpack-Cli"><a href="#Webpack-Cli" class="headerlink" title="Webpack-Cli"></a>Webpack-Cli</h4><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-<span class="keyword">cli</span> -g</span><br></pre></td></tr></table></figure>
<ul>
<li>交互式的初始化一个项目!</li>
<li>迁移项目! V1 -&gt; V2</li>
</ul>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// webpack-addons-<span class="built_in">demo</span> 是第三方的初始配置</span><br><span class="line">webpack-cli init webpack-addons-<span class="built_in">demo</span></span><br></pre></td></tr></table></figure>
<p>没有官方的脚手架，导致功能很鸡肋</p>
<p>目前持观望状态，持续关注</p>
<h3 id="Webpack配置"><a href="#Webpack配置" class="headerlink" title="Webpack配置"></a>Webpack配置</h3><ul>
<li>webpack (默认打包命名为 webpack.config.js 的配置文件)</li>
<li>webpack –config webpack.conf.dev.js (–config 指定打包的配置文件)</li>
</ul>
<h3 id="第三方脚手架"><a href="#第三方脚手架" class="headerlink" title="第三方脚手架"></a>第三方脚手架</h3><ul>
<li>Vue-cli</li>
<li>Angular-cli</li>
<li>React-starter</li>
</ul>
<h2 id="打包JS"><a href="#打包JS" class="headerlink" title="打包JS"></a>打包JS</h2><ul>
<li><figure class="highlight plain"><figcaption><span>entry<entry>output```</entry></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- webpack --config webpack.conf.js</span><br><span class="line"></span><br><span class="line">### webpack entry output</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>// app.js 是入口文件 bundle.js 是出口文件<br>webpack app.js bundle.js<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ES <span class="built_in">module</span></span><br><span class="line">- CommonJS</span><br><span class="line">- AMD</span><br><span class="line"></span><br><span class="line">AMD 是一个异步加载模块，所以<span class="built_in">require</span>的时候形成一个单独的chunk加载进来，因此有两个chunks：<span class="number">0.</span>bundle.js(<span class="number">0.</span>bundle.js是异步加载进来的模块)和bundle.js，如以下代码所示</span><br><span class="line"></span><br><span class="line">```<span class="javascript">js</span></span><br><span class="line"><span class="javascript"><span class="comment">// sum.js</span></span></span><br><span class="line"><span class="javascript">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, factory</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="meta">    'use strict'</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> a * b</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">&#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="comment">// app.js</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">require</span>([<span class="string">'./muti'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">muti</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'muti(2, 3) ='</span>, muti(<span class="number">2</span>, <span class="number">3</span>))</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br></pre></td></tr></table></figure></p>
<p>编写<strong>webpack.conf.js</strong>的时候要使用CommonJS规范</p>
<p>使用自定义的配置名称，加上–config：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --config webpack<span class="selector-class">.conf</span><span class="selector-class">.js</span></span><br></pre></td></tr></table></figure>
<p>如果名称为默认的webpack.config.js，则直接：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">webpack</span></span><br></pre></td></tr></table></figure>
<h3 id="entry-和-output"><a href="#entry-和-output" class="headerlink" title="entry 和 output"></a>entry 和 output</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        app: <span class="string">'./app.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">'[name].[hash:5].js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="编译ES6"><a href="#编译ES6" class="headerlink" title="编译ES6"></a>编译ES6</h2><h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><ul>
<li>Babel-loader</li>
<li>官网：babeljs.io</li>
<li>*最新版：npm install babel-loader@8.0.0-beta.0 @babel/core</li>
<li>npm install –save-dev babel-loader babel-core</li>
</ul>
<h3 id="例-3-3"><a href="#例-3-3" class="headerlink" title="例 3-3"></a>例 3-3</h3><p>初始化package.json:</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> init</span><br></pre></td></tr></table></figure>
<p>安装babel</p>
<p>编写 webpack.config.js 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// 排除 node_modules 文件</span></span><br><span class="line">            exclude: <span class="string">'/node_modules/'</span>,</span><br><span class="line">            use: &#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h4 id="Babel-Presets"><a href="#Babel-Presets" class="headerlink" title="Babel Presets"></a>Babel Presets</h4><ul>
<li>es2015</li>
<li>es2016</li>
<li>es2017</li>
<li>env</li>
<li>babel-preset-react</li>
<li>babel-preset-stage 0 - 3</li>
</ul>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install </span>@<span class="keyword">babel/preset-env </span>--save-dev</span><br><span class="line">npm <span class="keyword">install </span><span class="keyword">babel-preset-env </span>--save-dev</span><br></pre></td></tr></table></figure>
<p>给 preset 指定参数：</p>
<ul>
<li>targets</li>
<li>targets.browsers</li>
<li>targets.browsers: “last 2 versions”</li>
<li>targets.browsers: “&gt; 1%”</li>
<li>browserslist</li>
<li>Can I use</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 .babelrc(根目录下新建该文件) 中配置 babel-loader 的 presets</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"presets"</span>: [</span><br><span class="line">        [<span class="string">"@babel/preset-env"</span>, &#123;</span><br><span class="line">            <span class="string">"targets"</span>: &#123;</span><br><span class="line">                <span class="string">"browsers"</span>: [<span class="string">"last 2 versions"</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置时入口文件要清楚<strong>相对路径</strong></p>
<h4 id="Babel-Polyfill-和-Babel-Runtime-Transform"><a href="#Babel-Polyfill-和-Babel-Runtime-Transform" class="headerlink" title="Babel Polyfill 和 Babel Runtime Transform"></a>Babel Polyfill 和 Babel Runtime Transform</h4><p>这两个插件用来实现一些本身没有的函数和方法，如下所示</p>
<ul>
<li>Generator</li>
<li>Set</li>
<li>Map</li>
<li>Array.from</li>
<li>Array.prototype.includes</li>
<li>…</li>
</ul>
<h4 id="Babel-Polyfill"><a href="#Babel-Polyfill" class="headerlink" title="Babel Polyfill"></a>Babel Polyfill</h4><p>全局垫片</p>
<p>为应用的编写而准备</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> install @babel-polyfill --save</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"babel-polyfill"</span></span><br></pre></td></tr></table></figure>
<p>此时就可以在编写代码时使用ES6的语法，相当于全局污染</p>
<h4 id="Babel-Runtime-Transform"><a href="#Babel-Runtime-Transform" class="headerlink" title="Babel Runtime Transform"></a>Babel Runtime Transform</h4><p>局部垫片</p>
<p>为开发框架准备</p>
<p>不会污染全局</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> @babel-<span class="keyword">plugin</span>-transform-runtime <span class="comment">--save-dev</span></span><br><span class="line">npm <span class="keyword">install</span> @babel-runtime <span class="comment">--save</span></span><br><span class="line">.babelrc</span><br></pre></td></tr></table></figure>
<ol>
<li>新建 .babelrc 文件(实际上是一个json文件)</li>
<li>编写插件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"presets"</span>: [</span><br><span class="line">        [<span class="string">"@babel/preset-env"</span>, &#123;</span><br><span class="line">            <span class="string">"targets"</span>: &#123;</span><br><span class="line">                <span class="string">"browsers"</span>: [<span class="string">"last 2 versions"</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 使用了 ransform-runtime 插件来增加局部垫片</span></span><br><span class="line">    <span class="string">"plugins"</span>: [</span><br><span class="line">        <span class="string">"@babel/transform-runtime"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实际开发的选择"><a href="#实际开发的选择" class="headerlink" title="实际开发的选择"></a>实际开发的选择</h4><p>实际开发中如果是应用开发，只需要配置 <strong>presets</strong> 选项就可以了</p>
<ul>
<li>如果要在应用中支持ES6的方法，则使用import ‘babel-polyfill’</li>
<li>如果是像ElementUI这种给别人用的代码，则使用babel-runtime</li>
</ul>
<h2 id="编译-typescript"><a href="#编译-typescript" class="headerlink" title="编译 typescript"></a>编译 typescript</h2><ul>
<li>typescript是JS的超集</li>
<li>typescriptlang.org/tslang.cn</li>
<li>Microsoft</li>
</ul>
<h3 id="typescript-loader"><a href="#typescript-loader" class="headerlink" title="typescript-loader"></a>typescript-loader</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>第一个是官方的loader，第二个是第三方的loader</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">npm</span> i typescript ts-loader <span class="comment">--save-dev</span></span><br><span class="line"><span class="title">npm</span> i typescript awesome-typescript-loader <span class="comment">--save-dev</span></span><br></pre></td></tr></table></figure>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><ul>
<li><strong>tsconfig.json</strong></li>
<li>配置选项：</li>
<li>官网/docs/handbook/compiler-options.html</li>
<li>常用选项：</li>
<li>compilerOptions</li>
<li>include</li>
<li>exclude</li>
<li><strong>webpack.config.js</strong></li>
</ul>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 安装</span></span><br><span class="line">npm install webpack typescript ts-loader awesome-typescript-loader --<span class="built_in">save</span>-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js 配置</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.tsx?$/</span>,</span><br><span class="line">            use: &#123;</span><br><span class="line">                loader: <span class="string">'ts-loader'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json(项目根目录下新建此文件) 配置</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">        <span class="string">"module"</span>: <span class="string">"commonjs"</span>,</span><br><span class="line">        <span class="string">"target"</span>: <span class="string">"es5"</span>,</span><br><span class="line">        <span class="string">"typeRoots"</span>: [</span><br><span class="line">            <span class="string">"./node_modules/@type"</span>,</span><br><span class="line">            <span class="string">"./typings/modules"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">"include"</span>: [</span><br><span class="line">        <span class="string">"./src/*"</span></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">"exclude"</span>: [</span><br><span class="line">        <span class="string">"./node_modules"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行 webapck 进行打包</p>
<p>直接在typescript中引入js文件也是可以和平共处的，不会报错，如lodash：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> lodash <span class="comment">--save</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span></span><br></pre></td></tr></table></figure>
<h3 id="声明文件"><a href="#声明文件" class="headerlink" title="声明文件"></a>声明文件</h3><h4 id="types"><a href="#types" class="headerlink" title="@types"></a>@types</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> install @types/lodash --save</span><br><span class="line"><span class="built_in">npm</span> install @types/vue --save</span><br></pre></td></tr></table></figure>
<ul>
<li>如果不安装声明文件，即便写错了也不会报错</li>
<li>安装声明文件之后就会有错误提醒</li>
</ul>
<h4 id="typings"><a href="#typings" class="headerlink" title="@typings"></a>@typings</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// npm <span class="keyword">uninstall</span> @types/lodash <span class="comment">--save 先卸载types</span></span><br><span class="line">npm <span class="keyword">install</span> typings</span><br><span class="line">typings <span class="keyword">install</span> lodash <span class="comment">--save</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 告诉编译器在这个目录下找声明文件</span></span><br><span class="line"><span class="string">"typeRoots"</span>: [</span><br><span class="line">    <span class="string">"./node_modules/@type"</span>,</span><br><span class="line">    <span class="string">"./typings/modules"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>此时 typings 和 @types 获得同样的效果</p>
</div><div class="tags"><a href="/tags/Learning/">Learning</a><a href="/tags/Webpack/">Webpack</a></div><div class="post-nav"><a class="pre" href="/2018/05/11/webpack-提取公共代码、分割和懒加载/">webpack-提取公共代码、分割和懒加载</a><a class="next" href="/2018/05/09/webpack-前置知识/">webpack-前置知识</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'qiushiming';
var disqus_identifier = '2018/05/10/webpack-使用、打包、编译/';
var disqus_title = 'webpack-使用、打包、编译';
var disqus_url = 'http://shirmy.me/2018/05/10/webpack-使用、打包、编译/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/next/config.json',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//qiushiming.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://shirmy.me"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/">Angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/Node-js/">Node.js</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/Node-js/Translation/">Translation</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/designPattern/">designPattern</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Koa/">Koa</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Koa/Node-js/">Node.js</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Poetry/">Poetry</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Webpack/">Webpack</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Event-Loop/" style="font-size: 15px;">Event Loop</a> <a href="/tags/Life/" style="font-size: 15px;">Life</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/Learning/" style="font-size: 15px;">Learning</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Trying/" style="font-size: 15px;">Trying</a> <a href="/tags/Node-js/" style="font-size: 15px;">Node.js</a> <a href="/tags/Javascript/" style="font-size: 15px;">Javascript</a> <a href="/tags/learning/" style="font-size: 15px;">learning</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/Teaching/" style="font-size: 15px;">Teaching</a> <a href="/tags/designPattern/" style="font-size: 15px;">designPattern</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/Koa/" style="font-size: 15px;">Koa</a> <a href="/tags/poetry/" style="font-size: 15px;">poetry</a> <a href="/tags/Angular/" style="font-size: 15px;">Angular</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/28/策略模式/">策略模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/27/单例模式/">单例模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/08/闭包和高阶函数/">闭包和高阶函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/07/this、call和apply/">this、call和apply</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/04/面向对象的JavaScript/">面向对象的JavaScript</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/04/webpack4/">webpack4</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/12/从Angular4升级到Angular6/">从Angular4升级到Angular6</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/01/2018年上半年总结/">2018年上半年总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/08/深入理解koa原理/">深入理解koa中间件原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/06/Nginx代理及HTTP2/">Nginx代理及HTTP2</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//qiushiming.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Shirmy.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>